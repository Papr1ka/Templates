---
figureTitle: Рисунок
tableTitle: Таблица
listingTitle: Листинг
tableEqns: true
titleDelim: "&nbsp;–"
link-citations: true
linkReferences: true
chapters: true
...
<!--
Описание необходимых файлов картинок:
test1.png - Тест первой функции задания 1
test2.png - Тест второй функции задания 1
test3.png - Тест третьей функции задания 1
test4.png - Тест четвёртой функции задания 1
test5.png - Тест пятой функции задания 1
test6.png - Тест первой функции задания 2
test7.png - Тест второй функции задания 2
test8.png - Тест третьей функции задания 2
test9.png - Тест четвёртой функции задания 2
test10.png - Тест пятой функции задания 2
test11.png - Тест шестой функции задания 2
test12.png - Тест седьмой функции задания 2
-->

# [Содержание]{custom-style="UnnumberedHeadingOneNoTOC"} {.unnumbered}

%TOC%

# Практическая работа 2

Тема: Внешние структуры данных: текстовый и двоичный файлы.

Цель: Получить навыки применения файловых потоков языка С++ (или файлов
языка Си) по управлению текстовым и двоичным файлами.

# Задание 1

## Формулировка

Разработать программу, управления текстовым файлом

## Требования

1. Реализация ввода-вывода на основе файловых потоков С++: ofstream, ifstrim.
2. Имя физического файла вводится пользователем и передается в функции
обработки через параметр.
3. При открытии файла выполнять контроль его существования и открытия.
Примечание. При отладке программы можете имя физического файла
определить через константу.
4. Разработать функции для выполнения операций над текстовым файлом.
- создание текстового файла средствами текстового редактора кодировки
ASCII, содержащего десятичные числа по несколько чисел на строке;
- вывод содержимого текстового файла;
- добавление новой записи в конец файла;
- прочитать значение числа, указав его порядковый номер в файле, и вернуть
его значение;
- определить количество чисел в файле.
5. Разработать приложение и выполнить тестирование всех функций.
Приложение должно содержать диалоговый интерфейс на основе текстового
меню.
6. Контроль открытия и существования файла выполнить в основной программе
перед вызовом функции. Перед закрытием файла, проверить отсутствие
ошибок ввода и вывода (метод good)/
7. Создать модуль и перенести в него все отлаженные функции. Исключить
функции из приложения. Отладить приложение, подключив к нему модуль с
функциями.
8. Разработать функции для реализации дополнительных операций,
определенных вариантом и сохранить их в модуле с остальными функциями.
9. Выполнить тестирование приложения в полном объеме.

**Дополнительное задание варианта**:

Номер: <!--Номер варианта-->
Задание: Дополнительные операции <!--Вариативная часть задания 1-->

## Тестовый пример
Тестовый пример файла приведён в листинге [-@lst:code1].
<!--Тестовый пример файла, 20 записей--> 
```{#lst:code1 .txt caption="Копия содержания текстового файла на примере 20 записей
"}
```

## Реализация приложения

### Функционал приложения
Прототипы функций, реализующих операции задания приведены в листингах ([-@lst:code3]-[-@lst:code7])
[Нумерация листингов была сбита, после 1 следует 3] #

#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Вывод содержимого текстового файла
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code3 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code1].
Ожидаемый результат: <!--Ожидаемый результат теста (содержимое файла)-->

![Практический результат](test1.png){#fig:image1}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Добавление новой записи в конец файла
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code4 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code1].
Ожидаемый результат: <!--Ожидаемый результат теста (содержимое файла с добавлением последней строки)-->

![Практический результат](test2.png){#fig:image2}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Чтение значения числа согласно его порядковому номеру
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code5 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code1].
Входные данные: <!--Номер порядкового номера числа-->
Ожидаемый результат: <!--Ожидаемый результат теста (число)-->

![Практический результат](test3.png){#fig:image3}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Определение количества чисел в файле
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code6 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code1].
Ожидаемый результат: <!--Ожидаемый результат теста (количество чисел в файле)-->

![Практический результат](test4.png){#fig:image4}



<!--Функция индивидуального варианта-->
#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Определение количества чисел в файле
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code7 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code1].
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test5.png){#fig:image5}

### Код основной программы

Код основной программы приведён в листинге [-@lst:code8]

<!--Код основной программы (по идее не модуля)-->
```{#lst:code8 .cpp caption="Код основной программы"}
```

## Результаты тестирования

Скриншоты тестов каждой функции приведены на рисунках ([-@fig:image1] - [-@fig:image5])
Все тесты <!--Пройдены | Провалены-->

# Задание 2

## Условие задания

### Формулировка условия

Разработать программу управление двоичными файлами с
записями фиксированной длины.

### Требования задания

Общие требования: файл состоит из записей определенной структуры, согласно
варианту. Записи имеют ключ, уникальный в пределах файла.

Требования к подготовке и выполнению задания

1. Разработать структуру записи двоичного файла согласно варианту задания.
2. Подготовить тестовые данные в текстовом файле с кодировкой ASCII, в
соответствии со структурой записи варианта. При открытии файла выполнить
контроль его существования и открытия.
Примечание. Реализация операций по чтению данных из файла будет проще, если
значение для каждого поля записи размещать на отдельной строке текстового
редактора.
3. Имя файла вводит пользователь.
4. При открытии файла обеспечить контроль существования и открытия файла.
5. При применении механизма прямого доступа к записи файла выполнить
контроль присутствия записи с заданным номером в файле.
6. Разработать функции для выполнения операций:
- преобразование тестовых данных из текстового файла в двоичный файл;
- сохранение данных двоичного файла в текстовом, так, чтобы используя их
можно было восстановить двоичный файл;
- вывод всех записей двоичного файла;
- доступ к записи по ее порядковому номеру в файле, используя механизм
прямого доступа к записи в двоичном файле;
- удаление записи с заданным значением ключа, выполнить путем замены на
последнюю запись.
- манипулирование записями в двоичном файле согласно дополнительным
операциям, определенным в варианте;
7. Сохраните функции в новом модуле.
8. Разработать приложение, демонстрирующее выполнение всех операций,
подключив к нему модуль с функциями.
9. Выполнить тестирование приложения, продемонстрировав выполнение всех
операций.

### Формулировка задания варианта

Дополнительное задание варианта:

Вариант: <!--Номер варианта-->
Структура записи: <!--Структура записи-->
Дополнительные операции:
<!--Доп операции варианта-->
1. 
2. 

## Тестовый пример

Копия содержания текстового файла на примере 5 записей для преобразования
в двоичный файл приведена в листинге [-@lst:code9].

<!--Пример текстового файла для задания 2-->
```{#lst:code9 .txt caption="Содержание текстовый файл"}
```

Содержание двоичного файла (результат операции вывода двоичного файла на
экран), полученного из данных текстового файла приведено в листинге [-@lst:code10].

<!--Пример двоичного файла для задания 2-->
```{#lst:code10 .cpp caption="Содержание двоичного файла"}
```

## Реализация приложения

### Структура записи двоичного файла (из кода) и ее размер в байтах (ручной расчет и системный)

Структура приведена в листинге [-@lst:code11]

<!--Структура записи двоичного файла (из кода) (листинг, потому что цветные цифры-->
```{#lst:code11 .cpp caption="Структура записи двоичного файла"}
```

Ручной расчёт размера файла в байтах: <!--Ваш расчёт размера файла в байтах-->

Системный расчёт размера файла в байтах: <!--Полагаю, взять значение из свойств файла в проводнике, указать источник-->

### Изображение структуры двоичного файла с записями фиксированной длины.

Структура изображена в листинге [-@lst:code12]
<!--Изображение структуры двоичного файла-->
```{#lst:code12 .cpp caption="Изображение структуры двоичного файла"}
```

### Функционал приложения
Прототипы функций, реализующих операции задания приведены в листингах ([-@lst:code13]-[-@lst:code19])

#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Преобразование тестовых данных из текстового файла в двоичный файл
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code13 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code9].
Ожидаемый результат: Приведён в листинге [-@lst:code10]

![Практический результат](test6.png){#fig:image6}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Cохранение данных двоичного файла в текстовом, так, чтобы используя их можно было восстановить двоичный файл
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code14 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Ожидаемый результат: Приведён в листинге [-@lst:code9]

![Практический результат](test7.png){#fig:image7}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Вывод всех записей двоичного файла
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code15 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test8.png){#fig:image8}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Доступ к записи по её порядковому номеру в файле, используя механизм прямого доступа к записи в двоичном файле
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code16 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Входные данные: <!--Входные данные теста-->
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test9.png){#fig:image9}



#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: Удаление записи с заданным значением ключа, путем замены на последнюю запись
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code17 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Входные данные: <!--Входные данные теста-->
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test10.png){#fig:image10}



[Первая_функция_варианта] #
#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: <!--Что реализует первая функция варианта-->
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code18 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Входные данные: <!--Входные данные теста-->
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test11.png){#fig:image11}



[Вторая_функция_варианта] #
#### Функция <!--Название функции, заменить _НАЗВАНИЕ_ФУНКЦИИ_-->
Реализует: <!--Что реализует первая функция варианта-->
Предисловие: <!--Предисловие к функции-->

<!--Код функции-->
```{#lst:code19 .cpp caption="Функция _НАЗВАНИЕ_ФУНКЦИИ_"}
```

Постусловие <!--Постусловие к функции-->

Тестирование функции

Исходный файл: Приведён в листинге [-@lst:code10].
Входные данные: <!--Входные данные теста-->
Ожидаемый результат: <!--Ожидаемый результат теста-->

![Практический результат](test12.png){#fig:image12}

### Код основной программы

Код основной программы приведён в листинге [-@lst:code20]

<!--Код основной программы (по идее не модуля)-->
```{#lst:code20 .cpp caption="Код основной программы"}
```

## Результаты тестирования

Скриншоты тестов каждой функции приведены на рисунках ([-@fig:image6] - [-@fig:image12])
Все тесты <!--Пройдены | Провалены-->
